
<!DOCTYPE html>
<!--[if lt IE 7]>     <html class="no-js ie ltie10 ltie9 ltie8 ltie7 ie6" lang="en"> <![endif]-->
<!--[if IE 7]>        <html class="no-js ie ltie10 ltie9 ltie8 gtie6 gtie5 ie7" lang="en"> <![endif]-->
<!--[if IE 8]>        <html class="no-js ie ltie10 ltie9 gtie7 gtie6 gtie5 ie8" lang="en"> <![endif]-->
<!--[if IE 9]>        <html class="no-js ie ltie10 gtie8 gtie7 gtie6 gtie5 ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
	<!--(bake /templates/structure/html-header.html)-->
</head>

<body>
<div><a href="#skipnav" class="skip">Skip to main content</a></div>

	<div id="wrapper" class="wrapper">

		<!--(bake /templates/structure/header.html)-->

			<div class="main off-area">
			    <a id="skipnav" tabindex="-1"></a>

			    <div class="row">
			    	<div class="pane base3 tp12">
			    		<h4>Client Projects</h4>

			    		<ul class="tree">
			    			<li class="open"><a href="#" class="parent"><p>A.B.FOOD</p> <span class="count">(12)</span></a></li>
			    			<li class="open"><a href="#" class="parent"><p>ABDN ASSET MAN.</p> <span class="count">(13)</span></a></li>
			    			<li class="open"><a href="#" class="parent"><p>ADMIRAL GRP</p> <span class="count">(12)</span></a></li>
			    			<li class="open"><a href="#" class="parent"><p>ANGLO AMERICAN</p> <span class="count">(12)</span></a></li>
			    			<li class="open"><a href="#" class="parent"><p>ASHTEAD GRP.</p> <span class="count">(12)</a></span>
			    				<ul>
			    					<li><a href="#" class="show-files">Council of European Social something</a></li>
			    					<li><a href="#" class="show-files">European Social Survey</a></li>
			    					<li><a href="#" class="show-files active">Survey of Health, Ageing and Retirement in Europe</a></li>
			    					<li><a href="#" class="show-files">Research Infrastructure something</a></li>
			    					<li><a href="#" class="new-project">New Project</a></li>
			    				</ul>
			    			</li>
			    			<li class="open"><a href="#" class="parent"><p>AVIVA</p> <span class="count">(12)</span></a></li>
			    			<li class="open"><a href="#" class="parent"><p>BABCOCK INTL.</p> <span class="count">(12)</span></a></li>
			    			<li class="open"><a href="#" class="parent"><p>BARCLAYS</p> <span class="count">(12)</span></a></li>
			    			<li class="open"><a href="#" class="parent"><p>BARRATT</p> <span class="count">(12)</span></a></li>
			    			<li class="open"><a href="#" class="parent"><p>BP</p> <span class="count">(12)</span></a></li>
			    			<li class="open"><a href="#" class="parent"><p>BT GROUP</p> <span class="count">(12)</span></a></li>
			    			<li class="open"><a href="#" class="parent"><p>Lorem ipsum dolor sit amet</p> <span class="count">(1234)</span></a></li>
			    		</ul>
			    	</div>
			    	<div class="pane base9 tp12 tp-mgZero tp-mTop">
			    		<h4>Project: <span>Survey of Health, Ageing and Retirement in Europe</span></h4>

			    		<ul class="tree files">
			    			<li>
			    				<p>16:45 - 12/07/2015</p>
			    				<a href="#" class="in-progress">In Progress</a>
			    			</li>
			    			<li>
			    				<p>16:43 - 12/07/2015</p>
			    				<a href="#" class="in-progress">In Progress</a>
			    			</li>
			    			<li>
			    				<p>16:42 - 12/07/2015</p>
			    				<a href="#" class="in-progress">In Progress</a>
			    			</li>
			    			<li>
			    				<p>13:45 - 12/07/2015</p>
			    				<a href="#" class="delete">Delete</a>
			    				<a href="#" class="download">Download</a>			    				
			    			</li>
			    			<li>
			    				<p>12:45 - 12/07/2015</p>
			    				<a href="#" class="delete">Delete</a>
			    				<a href="#" class="download">Download</a>	
			    			</li>
			    			<li>
			    				<p>11:45 - 12/07/2015</p>
			    				<a href="#" class="delete">Delete</a>
			    				<a href="#" class="download">Download</a>	
			    			</li>
			    			<li>
			    				<p>9:45 - 12/07/2015</p>
			    				<a href="#" class="delete">Delete</a>
			    				<a href="#" class="download">Download</a>	
			    			</li>
			    			<li>
			    				<p>9:43 - 12/07/2015</p>
			    				<a href="#" class="delete">Delete</a>
			    				<a href="#" class="download">Download</a>	
			    			</li>
			    			<li>
			    				<p>9:40 - 12/07/2015</p>
			    				<a href="#" class="delete">Delete</a>
			    				<a href="#" class="download">Download</a>	
			    			</li>
			    			<li>
			    				<p>8:40 - 12/07/2015</p>
			    				<a href="#" class="delete">Delete</a>
			    				<a href="#" class="download">Download</a>	
			    			</li>
			    		</ul>
			    	</div>
		    	</div>

			</div><!-- .main -->
			<div class="push"></div>	
	</div><!-- .wrapper -->
	<footer>
  	<p>Copyright &copy; 2015 Rhapsody Media. All rights reserved.</p>
	</footer>
	<!--(bake /templates/structure/footer.html)-->

	<script type="text/javascript">
	'use strict';
		$(function () {
			var $doc = $(document),
					$treeParent = $('.parent'),
					$filesLink = $('.show-files'),
					$newProjectLink = $('.new-project'),
					$modalWindow = $('#alimir_bootmodal'),
					$addProjectBtn = $('#addProject'),

					toggleTree = function (e) {
						var $thisParent = $(this).parent();

						if ($thisParent.has('ul').length) {
							$thisParent.toggleClass('open');
						}
						e.preventDefault();
					},

					showFiles = function (e) {
						var $this = $(this);

						if ($this.hasClass('active')) {
							return
						} else {											
							/* Insert Call: get files */

							$filesLink.removeClass('active');
							$this.addClass('active');
						}				
						e.preventDefault();						
					},

					openModal = function (e) {
						$('.tab-content #login_tab').addClass('active fade in');
						$modalWindow.modal('show');
						e.preventDefault();
					},

					newProject = function (e) {
						var projectName = $('#project').val(),
								$validation = $('.error');

						if (projectName.length) {
							$('#project').val('');
							$modalWindow.modal('hide');
							console.log('created project: ' + projectName);
							/* Insert Call: create new project */

						} else {
							$modalWindow.addClass('animated shake');
							$('#project').focus();
						}					
						e.preventDefault();
					},

					modalOpenActions = function () {
						$(this).find($('#project')).focus();
					};

			/* show/collapse tree items */
			$treeParent.on('click', toggleTree);

			/* Show files */
			$filesLink.on('click', showFiles);

			/* Open modal */
			$newProjectLink.on('click', openModal);

			/* Create new project */
			$addProjectBtn.on('click', newProject);

			/* Once modal is open, focus text field */
			$modalWindow.on('shown.bs.modal', modalOpenActions);


			/* Close all children nodes on page load */
			$('.tree > li ').removeClass('open');
		});

	</script>

		<div id="alimir_bootmodal" class="modal fade" tabindex="-1" data-width="540" data-backdrop="static" data-keyboard="false" style="display: none;">
			<div class="tab-content">
				<div class="tab-pane active fade in" id="login_tab">
				  <div class="modal-header">
				    <button type="button" class="close" data-dismiss="modal">&#215;</button>
				    <h3>New Project</h3>
				  </div>
				  <div class="modal-body">
				    <div class="status"></div>
				    <div class="row-fluid control-group">
				    	<label>
				    		Name of project
				    	</label>
				    	<p class="error">Please enter a name</p>
				      <label>
				      	<input type="text" name="project" id="project" class="span12" value=""/>
				      </label>
				    </div>
			    </div>
			    <div class="modal-footer">
			    	 <a href="#" class="modal-cancel" data-dismiss="modal">Cancel</a>
			      <a name="addProject" id="addProject" class="bttn primary" data-loading-text="loading...">Add Project</a>
			     
			    </div>
		    </div>				
			</div>
		</div>

  </body>
</html>